<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Italy ¬∑ Around the World in 80 Games</title>
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>

<body>

  <header>
    <h1>Italy</h1>
    <div class="country-nav">
    <a href="greece.html" class="prev">‚Üê Greece</a>
    <a href="switzerland.html" class="next">Switzerland ‚Üí</a>
    </div>
  </header>

  <main>
    <section>
      <h2>Overview</h2>
      <div class="placeholder">
      <p>After a short trip across the Ionian Sea, we arrive in Italy, renowned for its rich history, breathtaking landscapes, and unparalleled contributions to art, cuisine, and culture. From the rolling vineyards of Tuscany to the romantic canals of Venice, and from the ancient ruins of Rome to the Renaissance masterpieces of Florence, Italy truly is a treasure trove of beauty and heritage.</p>
      <p>Viticulture is an enjoyable worker placement game, celebrating Italy‚Äôs rich winemaking heritage, as players jostle to recruit specialist workers, plant and harvest grapes, make wine and fulfil customer orders.</p>
      <p>Ponte del Diavolo is a clever abstract that is often overlooked. Set in Venice, players battle to build and connect their islands while blocking their opponent.</p>
      <p>Verona Twist is game of Shakespearean bluff and deception as one player seeks to hide Romeo and Juliet in plain sight, while the other strives to expose their identity.</p>
      </div>
    </section>

<section>
  <h2>Viticulture results</h2>
  <div class="placeholder">
    <div id="viticulture-tournaments"></div>
  </div>
</section>

<section>
  <h2>Ponte del Diavolo results</h2>
  <div class="placeholder">
    <div id="ponte-del-diavolo-tournaments"></div>
  </div>
</section>

<section>
  <h2>Verona Twist results</h2>
  <div class="placeholder">
    <div id="verona-twist-tournaments"></div>
  </div>
</section>

  </main>

  <footer>
    <p>¬© 2025 Around the World in 80 Games</p>
  </footer>

  <!-- ‚úÖ Load global script FIRST so BASE + sidenav are ready -->
  <script src="../assets/js/script.js"></script>

  <!-- ‚úÖ Country-specific logic AFTER script.js -->
  <script>

    const TROPHIES = {
  "1st": "ü•á",
  "2nd": "ü•à",
  "3rd": "ü•â"
};


  // ‚úÖ Map tournament IDs to their section containers
  const TOURNAMENT_SECTIONS = {
    404206: "viticulture-tournaments",
    404118: "ponte-del-diavolo-tournaments",
    404125: "verona-twist-tournaments",
  };

  async function loadCountryTournaments() {
    const res = await fetch(`${BASE}/data/tournaments.json`);
    const data = await res.json();

    Object.entries(TOURNAMENT_SECTIONS).forEach(([id, containerId]) => {
      const t = data[id];
      const container = document.getElementById(containerId);

      if (!t) {
        container.innerHTML = "<p>No results found.</p>";
        return;
      }

      const div = document.createElement("div");
      div.className = "tournament-card";

      if (t.status === "completed") {
        const results = t.top4 || t.top5 || [];

       const resultsTable = results
  .map(player => {
    const trophy = TROPHIES[player.rank] || "";
    return `
      <tr>
        <td>${trophy} ${player.rank}</td>
        <td>${player.name}</td>
      </tr>
    `;
  })
  .join("");


        div.innerHTML = `
          <table class="standings-table">
            <tr><th>Rank</th><th>Player</th></tr>
            ${resultsTable}
          </table>
          <p><a href="https://boardgamearena.com/tournament?id=${t.id}" target="_blank">View on BGA</a></p>
        `;
      } else if (t.status === "ongoing") {
        div.innerHTML = `
          <h3>Tournament ${t.id} ‚Äî Ongoing</h3>
          <p>Round: ${t.round || "Unknown"}</p>
          <p><a href="https://boardgamearena.com/tournament?id=${t.id}" target="_blank">View on BGA</a></p>
        `;
      }

      container.appendChild(div);
    });
  }

  loadCountryTournaments();
</script>

</body>
</html>
