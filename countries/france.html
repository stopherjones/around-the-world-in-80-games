<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>France ¬∑ Around the World in 80 Games</title>
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>

<body>

  <header>
    <h1>France</h1>
    <div class="country-nav">
    <a href="switzerland.html" class="prev">‚Üê Switzerland</a>
    <a href="mallorca.html" class="next">Mallorca ‚Üí</a>
    </div>
  </header>

  <main>
    <section>
      <h2>Overview</h2>
      <div class="placeholder">
      <p>If Germany was the spiritual home of modern board games, then our next destination, France, is very much the home of digital board games, being where BGA is based, and the thematic location for many, many modern games.</p>
      <p>The four games we will play in France aim to cover much of its beautiful countryside, historic towns and cities, and traditional culture and cuisine.</p>
      <p>In Fromage, we‚Äôll step into the world of artisanal cheesemaking, crafting France‚Äôs most beloved delicacies.</p>
      <p>Carcassonne invites us to build medieval landscapes of fortified cities, abbeys, and winding roads.</p>
      <p>Castles of Burgundy takes us to the fertile vineyards and estates of the Loire Valley, where players develop their lands into prosperous domains.</p>
      <p>And in Oriflamme, we enter the cutthroat world of French noble houses, scheming for influence in a game of bluff and betrayal. Bon chance !</p>
</div>
    </section>

<section>
  <h2>Fromage results</h2>
  <div class="placeholder">
    <div id="fromage-tournaments"></div>
  </div>
</section>

<section>
  <h2>Carcassonne results</h2>
  <div class="placeholder">
    <div id="carcassonne-tournaments"></div>
  </div>
</section>

<section>
  <h2>Castles of Burgundy results</h2>
  <div class="placeholder">
    <div id="castles-of-burgundy-tournaments"></div>
  </div>
</section>

<section>
  <h2>Oriflamme results</h2>
  <div class="placeholder">
    <div id="oriflamme-tournaments"></div>
  </div>
</section>
  </main>

  <footer>
    <p>¬© 2025 Around the World in 80 Games</p>
  </footer>

  <!-- ‚úÖ Load global script FIRST so BASE + sidenav are ready -->
  <script src="../assets/js/script.js"></script>

  <!-- ‚úÖ Country-specific logic AFTER script.js -->
<script>
  const COUNTRY_NAME = "France"; // ‚úÖ change per country

  const TROPHIES = {
    "1st": "ü•á",
    "2nd": "ü•à",
    "3rd": "ü•â"
  };

  async function loadCountryTournaments() {
    // ‚úÖ Load tournament data + metadata
    const tournaments = await fetch(`${BASE}/data/tournaments.json`).then(r => r.json());
    const meta = await fetch(`${BASE}/data/tournament-meta.json`).then(r => r.json());

    // ‚úÖ Filter metadata to only this country‚Äôs tournaments
    const countryTournaments = Object.entries(meta)
      .filter(([id, info]) => info.country === COUNTRY_NAME);

    // ‚úÖ Render each tournament
    countryTournaments.forEach(([id, info]) => {
      const t = tournaments[id];
      const container = document.getElementById(info.section);

      if (!container) return; // safety check

      if (!t) {
        container.innerHTML = "<p>No results found.</p>";
        return;
      }

      const div = document.createElement("div");
      div.className = "tournament-card";

      if (t.status === "completed") {
        const results = t.top4 || t.top5 || [];

        const resultsTable = results
          .map(player => {
            const trophy = TROPHIES[player.rank] || "";
            return `
              <tr>
                <td>${trophy} ${player.rank}</td>
                <td>${player.name}</td>
              </tr>
            `;
          })
          .join("");

        div.innerHTML = `
          <table class="standings-table">
            <tr><th>Rank</th><th>Player</th></tr>
            ${resultsTable}
          </table>
          <p><a href="https://boardgamearena.com/tournament?id=${t.id}" target="_blank">View on BGA</a></p>
        `;
      } else if (t.status === "ongoing") {
        div.innerHTML = `
          <h3>Tournament ${t.id} ‚Äî Ongoing</h3>
          <p>Round: ${t.round || "Unknown"}</p>
          <p><a href="https://boardgamearena.com/tournament?id=${t.id}" target="_blank">View on BGA</a></p>
        `;
      }

      container.appendChild(div);
    });
  }

  loadCountryTournaments();
</script>

</body>
</html>
