<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>United Kingdom · Around the World in 80 Games</title>
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>

<body>

  <header>
    <h1>United Kingdom</h1>
    <div class="country-nav">
  <span></span>
  <a href="netherlands.html" class="next">Netherlands →</a>
</div>
  </header>

  <main>
    <section>
      <h2>Overview</h2>
      <div class="placeholder">
        <p>Welcome to London!</p>
        <p>We begin our journey around the world in the footsteps of Phileas Fogg, in London, a city with a rich board-gaming history, from one of the original versions of Monopoly, to more modern games like Scotland Yard and Get on Board. But for our first two games, we’re opening the boxes on a Turn-Based Arena favourite, Next Station: London, as well as something of a hidden deduction gem, Mr. Jack.</p>
        <p>In Mr. Jack you’ll step into the shoes of either a cunning detective or the elusive Mr. Jack himself, racing against time in a game of cat and mouse through the streets of Victorian London.</p>
        <p>Then, we’ll switch gears and head into the hustle and bustle of Next Station: London, a game that needs little introduction, where you’ll play the role of a transport planner, as you try to create the most efficient underground network across the city.</p>
      </div>
    </section>

<section>
  <h2>Mr Jack results</h2>
  <div class="placeholder">
    <div id="mrjack-tournaments"></div>
  </div>
</section>

<section>
  <h2>Next Station: London results</h2>
  <div class="placeholder">
    <div id="nextstation-tournaments"></div>
  </div>
</section>

  </main>

  <footer>
    <p>© 2025 Around the World in 80 Games</p>
  </footer>

  <!-- ✅ Load global script FIRST so BASE + sidenav are ready -->
  <script src="../assets/js/script.js"></script>

 <script>
const COUNTRY_NAME = "United Kingdom"; // ✅ change per country

async function loadCountryTournaments() {
  // ✅ Use cached/preloaded data from script.js
  const { tournaments, meta } = await loadData();

  // ✅ Filter metadata to only this country’s tournaments
  const countryEntries = Object.entries(meta)
    .filter(([id, info]) => info.country === COUNTRY_NAME);

  countryEntries.forEach(([id, info]) => {
    const t = tournaments[id];
    const container = document.getElementById(info.section);

    if (!container) return;

    if (!t) {
      container.innerHTML = "<p>No results found.</p>";
      return;
    }

    const div = document.createElement("div");
    div.className = "tournament-card";

    if (t.status === "completed") {
      const results = t.top4 || [];

      const resultsTable = results
        .map(player => `
          <tr>
            <td>${player.rank}</td>
            <td>${player.name}</td>
          </tr>
        `)
        .join("");

      div.innerHTML = `
        <table class="standings-table">
          <tr><th>Rank</th><th>Player</th></tr>
          ${resultsTable}
        </table>
        <p><a href="https://boardgamearena.com/tournament?id=${id}" target="_blank">View on BGA</a></p>
      `;
    }

    if (t.status === "ongoing") {
      div.innerHTML = `
        <h3>Tournament ${id} — Ongoing</h3>
        <p><a href="https://boardgamearena.com/tournament?id=${id}" target="_blank">View on BGA</a></p>
      `;
    }

    container.appendChild(div);
  });
}

loadCountryTournaments();
</script>

</body>
</html>
