<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Germany Â· Around the World in 80 Games</title>
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>

<body>

  <header>
    <h1>Germany</h1>
    <div class="country-nav">
    <a href="netherlands.html" class="prev">â† Netherlands</a>
    <a href="denmark.html" class="next">Denmark â†’</a>
    </div>
  </header>

  <main>
    <section>
      <h2>Overview</h2>
      <div class="placeholder">
        <p>Welcome to Germany - the spiritual home of modern board games!</p>
        <p>Germany has a deep-rooted board game culture, with a long history of traditional board games at the heart of family life, as well as being the birthplace of the â€˜Eurogameâ€™ genre, emphasising strategy, resource management, and indirect player interaction over luck or conflict - including, of course, popular â€˜crossoverâ€™ games, Settlers of Catan and Carcassone. </p>
        <p>Germany is also the home of the prestigious board game award, the â€˜Spiel des Jahresâ€™ - so it is only fitting that we play 2006 winner, Thurn and Taxis - a game based in 16th century Germany, themed around the Thurn and Taxis family who revolutionised the postal system across Europe from their headquarters in Regensberg. </p>
        <p>This is a fast-paced, route-building game, where efficiency and timing are key for players to expand the length and breadth of their postal network ahead of the competition!</p>
      </div>
    </section>

<section>
  <h2>Thurn and Taxis results</h2>
  <div class="placeholder">
    <div id="thurn-and-taxis-tournaments"></div>
  </div>
</section>

  </main>

  <footer>
    <p>Â© 2025 Around the World in 80 Games</p>
  </footer>

  <!-- âœ… Load global script FIRST so BASE + sidenav are ready -->
  <script src="../assets/js/script.js"></script>

  <!-- âœ… Country-specific logic AFTER script.js -->
  <script>
  const COUNTRY_NAME = "Germany"; // âœ… change per country

  const TROPHIES = {
    "1st": "ğŸ¥‡",
    "2nd": "ğŸ¥ˆ",
    "3rd": "ğŸ¥‰"
  };

  async function loadCountryTournaments() {
    // âœ… Load tournament data + metadata
    const tournaments = await fetch(`${BASE}/data/tournaments.json`).then(r => r.json());
    const meta = await fetch(`${BASE}/data/tournament-meta.json`).then(r => r.json());

    // âœ… Filter metadata to only this countryâ€™s tournaments
    const countryTournaments = Object.entries(meta)
      .filter(([id, info]) => info.country === COUNTRY_NAME);

    // âœ… Render each tournament
    countryTournaments.forEach(([id, info]) => {
      const t = tournaments[id];
      const container = document.getElementById(info.section);

      if (!container) return; // safety check

      if (!t) {
        container.innerHTML = "<p>No results found.</p>";
        return;
      }

      const div = document.createElement("div");
      div.className = "tournament-card";

      if (t.status === "completed") {
        const results = t.top4 || t.top5 || [];

        const resultsTable = results
          .map(player => {
            const trophy = TROPHIES[player.rank] || "";
            return `
              <tr>
                <td>${trophy} ${player.rank}</td>
                <td>${player.name}</td>
              </tr>
            `;
          })
          .join("");

        div.innerHTML = `
          <table class="standings-table">
            <tr><th>Rank</th><th>Player</th></tr>
            ${resultsTable}
          </table>
          <p><a href="https://boardgamearena.com/tournament?id=${t.id}" target="_blank">View on BGA</a></p>
        `;
      } else if (t.status === "ongoing") {
        div.innerHTML = `
          <h3>Tournament ongoing</h3>
          <p><a href="https://boardgamearena.com/tournament?id=${t.id}" target="_blank">View on BGA</a></p>
        `;
      }

      container.appendChild(div);
    });
  }

  loadCountryTournaments();
</script>

</body>
</html>
