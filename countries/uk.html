<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>United Kingdom · Around the World in 80 Games</title>
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>

<body>

  <header>
    <h1>United Kingdom</h1>
    <p>Games from England, Scotland, Wales, and Northern Ireland</p>
  </header>

  <main>
    <section>
      <h2>Overview</h2>
      <div class="placeholder">
        <p>Welcome to London!</p>
        <p>We begin our journey around the world in the footsteps of Phileas Fogg, in London, a city with a rich board-gaming history, from one of the original versions of Monopoly, to more modern games like Scotland Yard and Get on Board. But for our first two games, we’re opening the boxes on a Turn-Based Arena favourite, Next Station, and something of a hidden deduction gem, Mr. Jack.</p>
        <p>In Mr. Jack you’ll step into the shoes of either a cunning detective or the elusive Mr. Jack himself, racing against time in a game of cat and mouse through the streets of Victorian London.</p>
        <p>Then, we’ll switch gears and head into the hustle and bustle of Next Station: London, a game that needs little introduction, where you’ll play the role of a transport planner, as you try to create the most efficient underground network across the city.</p>
      </div>
    </section>

    <section>
      <h2>Mr Jack</h2>
      <div class="placeholder">
        <p>Mr Jack results!</p>
        <div id="country-tournaments"></div>
      </div>
    </section>
  </main>

  <footer>
    <p>© 2025 Around the World in 80 Games</p>
  </footer>

  <!-- ✅ Load global script FIRST so BASE + sidenav are ready -->
  <script src="../assets/js/script.js"></script>

  <!-- ✅ Country-specific logic AFTER script.js -->
  <script>
    // ✅ Which tournaments belong to this country
    const COUNTRY_TOURNAMENT_IDS = [354697];

    async function loadCountryTournaments() {
      // ✅ Use BASE from script.js
      const res = await fetch(`${BASE}/data/tournaments.json`);
      const data = await res.json();

      const container = document.getElementById("country-tournaments");
      container.innerHTML = "";

      const tournaments = COUNTRY_TOURNAMENT_IDS
        .map(id => data[id])
        .filter(t => t);

      if (tournaments.length === 0) {
        container.innerHTML = "<p>No tournaments found for this country.</p>";
        return;
      }

      tournaments.forEach(t => {
        const div = document.createElement("div");
        div.className = "tournament-card";

        if (t.status === "completed") {
          const results = t.top4 || t.top5 || [];

          const resultsTable = results
            .map(player => `
              <tr>
                <td>${player.rank}</td>
                <td>${player.name}</td>
              </tr>
            `)
            .join("");

          div.innerHTML = `
            
            <table class="standings-table">
              <tr><th>Rank</th><th>Player</th></tr>
              ${resultsTable}
            </table>
            <p><a href="https://boardgamearena.com/tournament?id=${t.id}" target="_blank">View on BGA</a></p>
          `;
        } else if (t.status === "ongoing") {
          div.innerHTML = `
            <h3>Tournament ${t.id} — Ongoing</h3>
            <p>Round: ${t.round || "Unknown"}</p>
            <p><a href="https://boardgamearena.com/tournament?id=${t.id}" target="_blank">View on BGA</a></p>
          `;
        }

        container.appendChild(div);
      });
    }

    loadCountryTournaments();
  </script>

</body>
</html>
