<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sahara ¬∑ Around the World in 80 Games</title>
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>

<body>

  <header>
    <h1>Sahara</h1>
    <div class="country-nav">
    <a href="morocco.html" class="prev">‚Üê Morocco</a>
    <a href="botswana.html" class="next">Botswana ‚Üí</a>
    </div>
  </header>

  <main>
    <section>
      <h2>Overview</h2>
      <div class="placeholder">
      <p>Travelling south, we encounter the vast Sahara desert, that stretches across north Africa. For centuries, Tuareg caravans crossed this landscape with camels laden with salt, gold, and dates, guiding their way by stars and sand. It is against this backdrop that we play our next two games - Caravan and Targi.</p>
      <p>In Caravan, you become a trader, guiding camels across the desert to deliver goods to from Marrakesh in the north, to Timbuktu in the south; from Awlil (now Waalo) in the west, to Adadez in the east. Do you press forward to reach a city first, or reroute to claim an unguarded good? </p>  
<p>By contrast, Targi is a tense duel of positioning and resource control. Each turn, your Targi figures mark territory along the border of a desert market, claiming intersections that yield salt, pepper, dates, and precious tribe cards. Every placement blocks your rival, turning scarcity into a weapon. With its elegant symmetry and measured pacing, Targi evokes the balance of patience and competition that defines life on the desert‚Äôs edge.</p>

</p>
      </div>
    </section>

    <section>
      <h2>Targi results</h2>
      <div class="placeholder">
     <div id="targi-tournaments"></div>
</div>
    </section>

      <section>
      <h2>Caravan results</h2>
      <div class="placeholder">
     <div id="caravan-tournaments"></div>
</div>
    </section>

  </main>

  <footer>
    <p>¬© 2025 Around the World in 80 Games</p>
  </footer>

  <!-- ‚úÖ Load global script FIRST so BASE + sidenav are ready -->
  <script src="../assets/js/script.js"></script>

  <!-- ‚úÖ Country-specific logic AFTER script.js -->
  <script>
  const COUNTRY_NAME = "Sahara"; // ‚úÖ change per country

  const TROPHIES = {
    "1st": "ü•á",
    "2nd": "ü•à",
    "3rd": "ü•â"
  };

  async function loadCountryTournaments() {
    // ‚úÖ Load tournament data + metadata
    const tournaments = await fetch(`${BASE}/data/tournaments.json`).then(r => r.json());
    const meta = await fetch(`${BASE}/data/tournament-meta.json`).then(r => r.json());

    // ‚úÖ Filter metadata to only this country‚Äôs tournaments
    const countryTournaments = Object.entries(meta)
      .filter(([id, info]) => info.country === COUNTRY_NAME);

    // ‚úÖ Render each tournament
    countryTournaments.forEach(([id, info]) => {
      const t = tournaments[id];
      const container = document.getElementById(info.section);

      if (!container) return; // safety check

      if (!t) {
        container.innerHTML = "<p>No results found.</p>";
        return;
      }

      const div = document.createElement("div");
      div.className = "tournament-card";

      if (t.status === "completed") {
        const results = t.top4 || t.top5 || [];

        const resultsTable = results
          .map(player => {
            const trophy = TROPHIES[player.rank] || "";
            return `
              <tr>
                <td>${trophy} ${player.rank}</td>
                <td>${player.name}</td>
              </tr>
            `;
          })
          .join("");

        div.innerHTML = `
          <table class="standings-table">
            <tr><th>Rank</th><th>Player</th></tr>
            ${resultsTable}
          </table>
          <p><a href="https://boardgamearena.com/tournament?id=${t.id}" target="_blank">View on BGA</a></p>
        `;
      } else if (t.status === "ongoing") {
        div.innerHTML = `
          <h3>Tournament ongoing</h3>
          <p><a href="https://boardgamearena.com/tournament?id=${t.id}" target="_blank">View on BGA</a></p>
        `;
      }

      container.appendChild(div);
    });
  }

  loadCountryTournaments();
</script>

</body>
</html>
