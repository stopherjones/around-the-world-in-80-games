<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Around the World in 80 Games</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>

  <header>
    <h1>Around the World in 80 Games</h1>
    <div class="country-nav">
        <span></span>
  <a href="countries/unitedkingdom.html" class="next">First stop: United Kingdom →</a>

</div>
  </header>

  <main>
    <section>
      <h2>About the event</h2>
      <div class="placeholder">
        <p>Welcome to Around the World in 80 Games!</p>
          <p>We’re about to embark on a journey that takes us through exciting locations and cultures, all from the comfort of our virtual game table. Over the coming weeks, we’ll explore board games that represent different corners of the globe, offering a unique way to experience the world without leaving home.</p>
      </div>
    </section>

    <section>
      <h2>Next location / games</h2>
      <div class="placeholder">
        <p><a href="countries/saudi-arabia.html">Saudi Arabia for the city-builder, Neom</a></p>
      </div>
    </section>

        <section>
  <h2>Ongoing locations / games</h2>
  <div class="placeholder" id="ongoing-list">
    <!-- JS will populate this -->
  </div>
</section>

    
  </main>

  <footer>
    <p>© 2025 Around the World in 80 Games</p>
  </footer>

  <!-- Script loads sidenav from /components -->
  <script src="assets/js/script.js"></script>
 <script>
async function loadOngoing() {
  const tournaments = await fetch(`${BASE}/data/tournaments.json`).then(r => r.json());
  const meta = await fetch(`${BASE}/data/tournament-meta.json`).then(r => r.json());

  const container = document.getElementById("ongoing-list");

  // ✅ Find all ongoing tournaments (in JSON order)
  const ongoing = Object.entries(tournaments)
    .filter(([id, t]) => t.status === "ongoing");

  if (ongoing.length === 0) {
    container.innerHTML = "<p>No tournaments currently ongoing.</p>";
    return;
  }

  ongoing.forEach(([id, t]) => {
    const info = meta[id];
    if (!info) return;

    const countrySlug = info.country.toLowerCase().replace(/\s+/g, "");
    const countryUrl = `countries/${countrySlug}.html`;
    const bgaUrl = `https://boardgamearena.com/tournament?id=${id}`;

    const div = document.createElement("div");
    div.className = "ongoing-item";

    div.innerHTML = `
      <p>
        <a href="${countryUrl}">${info.country}</a>
        &nbsp;–&nbsp;
        <a href="${bgaUrl}" target="_blank">${info.game}</a>
      </p>
    `;

    container.appendChild(div);
  });
}

loadOngoing();
</script>

</body>
</html>
